# Project Dump
# Generated: 2026-01-30 00:24:27
# Path: /home/hxragi/projects/Visual-Ratio/src
# ============================================

main/java/dev/hxragi/VisualRatio.java
```java
package dev.hxragi;

import dev.hxragi.config.VisualRatioConfig;
import dev.hxragi.keybind.KeyBinding;
import kotlin.jvm.functions.Function0;
import me.fzzyhmstrs.fzzy_config.api.ConfigApi;
import net.fabricmc.api.ClientModInitializer;

public class VisualRatio implements ClientModInitializer {
  public static final String MOD_ID = "visual-ratio";
  public static VisualRatioConfig CONFIG;

  @Override
  public void onInitializeClient() {
    CONFIG = ConfigApi.registerAndLoadConfig((Function0<? extends VisualRatioConfig>) () -> new VisualRatioConfig());

    KeyBinding.register();
  }
}
```

main/java/dev/hxragi/config/VisualRatioConfig.java
```java
package dev.hxragi.config;

import dev.hxragi.VisualRatio;
import me.fzzyhmstrs.fzzy_config.annotations.NonSync;
import me.fzzyhmstrs.fzzy_config.config.Config;
import me.fzzyhmstrs.fzzy_config.validation.misc.ValidatedBoolean;
import me.fzzyhmstrs.fzzy_config.validation.number.ValidatedFloat;
import net.minecraft.resources.Identifier;

public class VisualRatioConfig extends Config {

  public VisualRatioConfig() {
    super(Identifier.fromNamespaceAndPath(VisualRatio.MOD_ID, "config"));
  }

  @NonSync
  public ValidatedBoolean enable = new ValidatedBoolean(false);

  @NonSync
  public ValidatedFloat aspectRatio = new ValidatedFloat(1.50f, 10.0f, 0.3f);

  @NonSync
  public ValidatedFloat ratioStep = new ValidatedFloat(0.5f, 2.0f, 0.1f);
}
```

main/java/dev/hxragi/mixin/GameRendererMixin.java
```java
package dev.hxragi.mixin;

import com.mojang.blaze3d.vertex.PoseStack;
import dev.hxragi.VisualRatio;
import net.minecraft.client.renderer.GameRenderer;
import org.joml.Matrix4f;
import org.spongepowered.asm.mixin.Mixin;
import org.spongepowered.asm.mixin.Shadow;
import org.spongepowered.asm.mixin.injection.At;
import org.spongepowered.asm.mixin.injection.Inject;
import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;

@Mixin(GameRenderer.class)
public abstract class GameRendererMixin {

  @Shadow
  private float renderDistance;

  @Inject(method = "getProjectionMatrix", at = @At("TAIL"), cancellable = true)
  private void visualratio$modifyProjectionMatrix(float fov, CallbackInfoReturnable<Matrix4f> cir) {
    if (VisualRatio.CONFIG.enable.get()) {
      PoseStack poseStack = new PoseStack();
      poseStack.last().pose().identity();
      poseStack.last().pose().mul(new Matrix4f().setPerspective(
          (float) Math.toRadians(fov),
          VisualRatio.CONFIG.aspectRatio.get(),
          0.05f,
          this.renderDistance * 4.0f));
      cir.setReturnValue(poseStack.last().pose());
    }
  }
}
```

main/java/dev/hxragi/keybind/KeyBinding.java
```java
package dev.hxragi.keybind;

import org.lwjgl.glfw.GLFW;

import com.mojang.blaze3d.platform.InputConstants;

import net.fabricmc.fabric.api.client.event.lifecycle.v1.ClientTickEvents;
import net.fabricmc.fabric.api.client.keybinding.v1.KeyBindingHelper;
import net.minecraft.client.KeyMapping;
import net.minecraft.resources.Identifier;

import dev.hxragi.VisualRatio;
import dev.hxragi.util.RatioManager;

public class KeyBinding {
  private static final RatioManager ratioManager = new RatioManager();
  private static KeyMapping.Category CATEGORY = new KeyMapping.Category(
      Identifier.fromNamespaceAndPath(VisualRatio.MOD_ID, "category.visual-ratio"));

  private static KeyMapping increaseKey;
  private static KeyMapping decreaseKey;

  public static void register() {
    increaseKey = KeyBindingHelper
        .registerKeyBinding(
            new KeyMapping("key.increaseKey", InputConstants.Type.KEYSYM, GLFW.GLFW_KEY_UNKNOWN, CATEGORY));

    decreaseKey = KeyBindingHelper
        .registerKeyBinding(
            new KeyMapping("key.decreaseKey", InputConstants.Type.KEYSYM, GLFW.GLFW_KEY_UNKNOWN, CATEGORY));

    ClientTickEvents.END_CLIENT_TICK.register(client -> {
      while (increaseKey.consumeClick()) {
        ratioManager.increaseRatio();
      }

      while (decreaseKey.consumeClick()) {
        ratioManager.decreaseRatio();
      }
    });
  }
}
```

main/java/dev/hxragi/util/RatioManager.java
```java
package dev.hxragi.util;

import dev.hxragi.VisualRatio;

public final class RatioManager {
  public RatioManager() {
  }

  public void increaseRatio() {
    if (VisualRatio.CONFIG == null)
      return;
    VisualRatio.CONFIG.aspectRatio
        .setAndUpdate(VisualRatio.CONFIG.aspectRatio.get() + VisualRatio.CONFIG.ratioStep.get());
  }

  public void decreaseRatio() {
    if (VisualRatio.CONFIG == null)
      return;
    VisualRatio.CONFIG.aspectRatio
        .setAndUpdate(VisualRatio.CONFIG.aspectRatio.get() - VisualRatio.CONFIG.ratioStep.get());
  }
}
```

main/resources/fabric.mod.json
```json
{
	"schemaVersion": 1,
	"id": "visual-ratio",
	"version": "${version}",
	"name": "Visual Ratio",
	"description": "Client-side mod that lets you customize your Minecraft aspect ratio independently from window size.",
	"authors": [
		"hxragi"
	],
	"contact": {
		"sources": "https://github.com/hxragi/Visual-Ratio",
		"issues": "https://github.com/hxragi/Visual-Ratio/issues"
	},
	"license": "MIT",
	"icon": "assets/visual-ratio/icon.png",
	"environment": "client",
	"entrypoints": {
		"client": [
			"dev.hxragi.VisualRatio"
		]
	},
	"mixins": [
		"visual-ratio.mixins.json"
	],
	"depends": {
		"fabricloader": ">=0.18.4",
		"minecraft": ">=1.21.11",
		"java": ">=21",
		"fabric-api": "*",
		"fzzy_config": "*"
	},
	"custom": {
		"fzzy_config": [
			"visual-ratio"
		]
	}
}
```

main/resources/visual-ratio.mixins.json
```json
{
	"required": true,
	"package": "dev.hxragi.mixin",
	"compatibilityLevel": "JAVA_21",
	"mixins": [
		"GameRendererMixin"
	],
	"injectors": {
		"defaultRequire": 1
	},
	"overwrites": {
		"requireAnnotations": true
	}
}
```

# ============================================
# Всего файлов: 7
# Пропущено: 1
